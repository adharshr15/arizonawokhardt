<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T+H</title>
    <link href="/styles.css" rel="stylesheet" type="text/css" media="all">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/azw-logo.png" />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/f936906ae0.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <!--Music Player Header-->
    <div class="header">
      <button class='home-button' onClick="loadPage('home')"><img src="/assets/images/azw-Logo.png"></button>
      <button id='previous-track' class="music-controls"><img class='prev-next' src="/assets/images/prev.png"></button>
      <button id='play-pause-track' class="music-controls"><img class='play-pause' src="/assets/images/play.png"></button>
      <button id='next-track' class="music-controls"><img class='prev-next' src="/assets/images/next.png"></button>
      <div id="song-title-marquee" class="header-marquee">
        <marquee id="song-title"></marquee>
      </div>
      <select id="playlist-select" class="header-marquee"></select>
      <div id='time-together-marquee' class="header-marquee">
        <marquee id="time-together"></marquee>
      </div>
    </div>
    

    <!--Main Content of page-->
    <div id="main-content">
      <!--page content is loaded here using loadPage()-->
    </div>
  </body>
</html>

<script>
// PAGE LOADING

const cache = {
  music: null,
  gallery: null,
  blog: null,
  outfits: null, 
  scrapbook: null
}

// Functions
function loadPage(page) {
  fetch(`${page}.html`)
    .then(res => res.text())
    .then(html => {
      document.getElementById('main-content').innerHTML = html;

      switch(page) {
        case 'music':
          if (cache.music) {
            // Use cached data
            musicData = cache.music;
            renderMusicFrames(currentMusicPage);
          } else {
            fetch("assets/music.json")
              .then(res => {
                if (!res.ok) throw new Error('Failed to fetch music.json');
                return res.json();
              })
              .then(data => {
                musicData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                cache.music = musicData; // Cache the data
                renderMusicFrames(currentMusicPage);
              })
              .catch(err => {
                console.error('Error loading music.json:', err);
              });
          }
          break;

        case 'gallery':
          if (cache.gallery) {
            galleryData = cache.gallery;
            galleryViewGrid = true;
            renderGalleryFrames(currentGalleryPage, 'grid');
            setupGalleryButtons();
          } else {
            fetch('/assets/gallery.json')
              .then(res => {
                if (!res.ok) throw new Error('Failed to fetch gallery.json');
                return res.json();
              })
              .then(data => {
                galleryData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                cache.gallery = galleryData; // Cache the data

                galleryViewGrid = true;
                renderGalleryFrames(currentGalleryPage, 'grid');
                setupGalleryButtons();
              })
              .catch(err => {
                console.error('Error loading gallery.json:', err);
              });
          }
          break;

        case 'blog':
          if (cache.blog) {
            blogData = cache.blog;
            renderBlogFrames(currentBlogPage);
          } else {
            fetch('/assets/blog.json')
              .then(res => {
                if (!res.ok) throw new Error('Failed to fetch blog.json');
                return res.json();
              })
              .then(data => {
                blogData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                cache.blog = blogData; // Cache the data
                renderBlogFrames(currentBlogPage);
              })
              .catch(err => {
                console.error('Error loading blog.json:', err);
              });
          }
          break;

        case 'outfits':
          if (cache.outfits) {
            outfitsData = cache.outfits;
            renderOutfitFrames(currentOutfitIndex);
          } else {
            fetch('/assets/outfits.json')
              .then(res => {
                if (!res.ok) throw new Error('Failed to fetch outfits.json');
                return res.json();
              })
              .then(data => {
                outfitsData = data.sort((a, b) => new Date(a.date) - new Date(b.date)); // ascending
                cache.outfits = outfitsData; // Cache the data
                renderOutfitFrames(currentOutfitIndex);
              })
              .catch(err => {
                console.error('Error loading outfits.json:', err);
              });
          }
          break;

        case 'scrapbook':
          if (cache.scrapbook) {
            scrapbookData = cache.scrapbook;
            scrapbookViewGrid = true;
            renderScrapbookFrames(currentScrapbookPage, 'grid');
            setupScrapbookButtons();
          } else {
            fetch('/assets/scrapbook.json')
              .then(res => {
                if (!res.ok) throw new Error('Failed to fetch scrapbook.json');
                return res.json();
              })
              .then(data => {
                scrapbookData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                cache.scrapbook = scrapbookData; // Cache the data

                scrapbookViewGrid = true;
                renderScrapbookFrames(currentScrapbookPage, 'grid');
                setupScrapbookButtons();
              })
              .catch(err => {
                console.error('Error loading scrapbook.json:', err);
              });
          }
          break;
      }
    });

    window.scrollTo(0, 0);
}


// Listeners
window.addEventListener('DOMContentLoaded', () => {
  const initialPage = location.hash ? location.hash.substring(1) : 'home';
  loadPage(initialPage);
});


// MUSIC PLAYER

let isPlaying = true;
let currentSong = new Audio();
let playlists = {};
let track_list = [];
let track_index = 0;

// Variables
const playlistSelect = document.getElementById("playlist-select");
const songTitle = document.getElementById("song-title");
const prevTrackButton = document.getElementById("previous-track");
const playPauseTrackButton = document.getElementById("play-pause-track");
const nextTrackButton = document.getElementById("next-track");

// Functions
function loadTrack(index) {
  if (track_list.length === 0) return; 

  currentSong.src = track_list[index].path;
  document.getElementById('song-title').textContent = String(index + 1) + ". " + track_list[index].name;
  currentSong.load();
}

function playPauseTrack() {
  if (isPlaying) {
    currentSong.pause();
    isPlaying = !isPlaying;
    playPauseTrackButton.innerHTML = '<img src="/assets/images/play.png">';
  } else {
    currentSong.play();
    isPlaying = !isPlaying;
    playPauseTrackButton.innerHTML = '<img src="/assets/images/pause.png">';
  }
}

function nextTrack() {
  if (track_index < track_list.length - 1) {
    track_index++;
  } else {
    track_index = 0;
  }
  loadTrack(track_index);
  currentSong.play();
  playPauseTrackButton.innerHTML = '<img src="/assets/images/pause.png">';
  isPlaying = true;
}

function previousTrack() {
  if (track_index > 0) {
    track_index--;
  } 
  loadTrack(track_index);
  currentSong.play();
  playPauseTrackButton.innerHTML = '<img src="/assets/images/pause.png">';
  isPlaying = true;
}

function changePlaylist() {
  const selected = playlistSelect.value;
  track_list = playlists[selected];
  track_index = 0;
  songTitle.textContent = track_list[0].name;
  loadTrack(track_index);
  playPauseTrack();
}


fetch("/assets/mixtapes.json")
  .then(response => response.json())
  .then(data => {
    playlists = data;

    for (let playlistName in playlists) {
      const option = document.createElement("option");
      option.value = playlistName;
      option.textContent = playlistName;
      playlistSelect.appendChild(option);
    }

    // Set default playlist and song title
    const firstPlaylist = Object.keys(playlists)[0];
    if (firstPlaylist) {
      playlistSelect.value = firstPlaylist;
      track_list = playlists[firstPlaylist];
      track_index = 0;
      songTitle.textContent = String(track_index + 1) + ". " + track_list[0].name;
      loadTrack(track_index);
      isPlaying = false;
    }
  });

// Listeners
playlistSelect.addEventListener("change", changePlaylist);
prevTrackButton.addEventListener('click', previousTrack);
playPauseTrackButton.addEventListener('click', playPauseTrack);
nextTrackButton.addEventListener('click', nextTrack);
currentSong.addEventListener('ended', nextTrack);

// TIME TOGETHER

// Variables
const timeTogether = document.getElementById('time-together');
const startDate = new Date("August 10, 2024 01:00:00");

// Functions
function updateTimeTogether() {
  const now = new Date();
  let diff = now - startDate;

  let seconds = Math.floor(diff / 1000);
  const minutes = Math.floor(seconds / 60);
  const hours = Math.floor(minutes / 60);
  const days = Math.floor(hours / 24);

  const years = Math.floor(days / 365.25);
  const months = Math.floor((days % 365.25) / 30.44);
  const remDays = Math.floor((days % 365.25) % 30.44);

  const remHours = hours % 24;
  const remMinutes = minutes % 60;
  const remSeconds = seconds % 60;

  timeTogether.textContent = 
    `${years} Year${years !== 1 ? 's' : ''}, ` +
    `${months} Month${months !== 1 ? 's' : ''}, ` +
    `${remDays} Day${remDays !== 1 ? 's' : ''}, ` +
    `${remHours} Hour${remHours !== 1 ? 's' : ''}, ` +
    `${remMinutes} Minute${remMinutes !== 1 ? 's' : ''}, ` +
    `${remSeconds} Second${remSeconds !== 1 ? 's' : ''} Together`;
}

updateTimeTogether();

// Update every second
setInterval(updateTimeTogether, 1000);

// GALLERY

// Variables
let galleryData = [];
let galleryViewGrid = true;
let currentGalleryIndex = 0;
let currentGalleryPage = 1;
let galleryItemsPerPage = 15;

// Functions
function nextGalleryGridPage() {
  galleryLength = galleryData.length;
  itemsOnNextPage = galleryLength - (currentGalleryPage * galleryItemsPerPage);
  if (itemsOnNextPage > 0) {
    currentGalleryPage++;
    currentGalleryIndex += galleryItemsPerPage;
    renderGalleryFrames(currentGalleryPage, 'grid');
  }
}
function prevGalleryGridPage() {
  if (currentGalleryPage > 1) {
    currentGalleryPage--;
    currentGalleryIndex -= galleryItemsPerPage;
    renderGalleryFrames(currentGalleryPage, 'grid');
  }
}
function nextGalleryBigPage() {
  if (currentGalleryIndex < galleryData.length - 1) {
    currentGalleryIndex++;
    currentGalleryPage = Math.floor(currentGalleryIndex / galleryItemsPerPage) + 1;
    renderGalleryFrames(currentGalleryIndex, 'big');
  }
}
function prevGalleryBigPage() {
  if (currentGalleryIndex > 0) {
    currentGalleryIndex--;
    currentGalleryPage = Math.floor(currentGalleryIndex / galleryItemsPerPage) + 1;
    renderGalleryFrames(currentGalleryIndex, 'big');
  }
}
function setupGalleryButtons() {
  const gridGalleryButton = document.getElementById('grid-gallery-button');
  const bigGalleryButton = document.getElementById('big-gallery-button');
  if (gridGalleryButton && bigGalleryButton) {
    gridGalleryButton.removeEventListener('click', galleryGridViewToggle);
    bigGalleryButton.removeEventListener('click', galleryBigViewToggle);

    gridGalleryButton.addEventListener('click', galleryGridViewToggle);
    bigGalleryButton.addEventListener('click', galleryBigViewToggle);
  }
}
function galleryGridViewToggle() {
  if (!galleryViewGrid) {
    galleryViewGrid = true;
    renderGalleryFrames(currentGalleryPage, 'grid'); 
  }
}
function galleryBigViewToggle() {
  if (galleryViewGrid) {
    galleryViewGrid = false;
    renderGalleryFrames(currentGalleryIndex, 'big');
  }
}
function renderGalleryFrames(content, view) {
  const container = document.getElementById('gallery-container');
  container.innerHTML = '';

  const pageSelectContainer = document.getElementById('gallery-page-select-container');
  pageSelectContainer.innerHTML = '';

  // if grid view, the current page, which has <= 15 images, is passed as content
  if (view === 'grid') {
    document.getElementById('grid-gallery-button').disabled = true;
    document.getElementById('big-gallery-button').disabled = false;

    container.className = 'gallery-container-grid';

    const start = (content - 1) * galleryItemsPerPage;
    const end = content * galleryItemsPerPage;
    const pageItems = galleryData.slice(start, end);
    currentGalleryIndex = start;

    pageItems.forEach((image, index) => {
      const globalIndex = start + index;

      const frame = document.createElement('div');
      frame.className = 'pink-metallic gallery-frame-small';
      frame.innerHTML = `
        <img class="gallery-image" src="${image.path}">
      `;
      frame.dataset.index = globalIndex;

      // Add click listener to switch to big view
      frame.addEventListener('click', () => {
        currentGalleryIndex = globalIndex;
        galleryBigViewToggle();
      });

      container.appendChild(frame);
    });

    // add page select buttons
    pageSelectContainer.innerHTML = `
      <button id="gallery-grid-prev-button" class="left toggle-button grid-prev-button"></button>
      <button id="gallery-grid-next-button" class="right toggle-button grid-next-button"></button>
    `;

    // add click listeners for buttons
    const prevButton = document.getElementById('gallery-grid-prev-button');
    const nextButton = document.getElementById('gallery-grid-next-button');

    prevButton.addEventListener('click', prevGalleryGridPage);
    nextButton.addEventListener('click', nextGalleryGridPage);

    const totalPages = Math.ceil(galleryData.length / galleryItemsPerPage);

    if (currentGalleryPage === 1) { prevButton.disabled = true; }
    if (currentGalleryPage === totalPages) { nextButton.disabled = true; }

    // cache next page
    const nextPage = content + 1;
    
    if (nextPage <= totalPages) {
      const preloadStart = (nextPage - 1) * galleryItemsPerPage;
      const preloadEnd = nextPage * galleryItemsPerPage;
      const preloadItems = galleryData.slice(preloadStart, preloadEnd);

      preloadItems.forEach(item => {
        const img = new Image();
        img.src = item.path;
      });
    }

    // cache previous page
    const prevPage = content - 1;

    if (prevPage >= 1) {
      const preloadStart = (prevPage - 1) * galleryItemsPerPage;
      const preloadEnd = prevPage * galleryItemsPerPage;
      const preloadItems = galleryData.slice(preloadStart, preloadEnd);

      preloadItems.forEach(item => {
        const img = new Image();
        img.src = item.path;
      });
    }

  // if big view, the current index is passed as content
  } else {
    document.getElementById('grid-gallery-button').disabled = false;
    document.getElementById('big-gallery-button').disabled = true;

    container.className = 'gallery-container-big';
    
    const image = galleryData[content];

    const frame = document.createElement('div');
    frame.className = 'pink-metallic gallery-frame-big';
    frame.innerHTML = `
      <img class="gallery-image" src="${image.path}">
      <div class='inner-text gallery-description'>
        ${image.description}
        <div class='date'>${image.date}</div>
      </div>
    `;

    container.appendChild(frame);

    // add page select buttons
    pageSelectContainer.innerHTML = `
      <button id="gallery-big-prev-button" class="left toggle-button big-prev-button"></button>
      <button id="gallery-big-next-button" class="right toggle-button big-next-button"></button>
    `;

    // add click listeners for buttons
    const prevButton = document.getElementById('gallery-big-prev-button');
    const nextButton = document.getElementById('gallery-big-next-button');

    prevButton.addEventListener('click', prevGalleryBigPage);
    nextButton.addEventListener('click', nextGalleryBigPage);

    if (currentGalleryIndex === 0) { prevButton.disabled = true; }
    if (currentGalleryIndex === galleryData.length - 1) { nextButton.disabled = true; }
  }
}

// BLOG

// Variables
let blogData = [];
let currentBlogPage = 1;
let blogItemsPerPage = 2;

// Functions
function nextBlogPage() {
  blogLength = blogData.length;
  itemsOnNextPage = blogLength - (currentBlogPage * blogItemsPerPage);
  if (itemsOnNextPage > 0) {
    currentBlogPage++;
    renderBlogFrames(currentBlogPage);
  }
}
function prevBlogPage() {
  if (currentBlogPage > 1) {
    currentBlogPage--;
    renderBlogFrames(currentBlogPage);
  }
}
function renderBlogFrames(page) {
  const container = document.getElementById('blog-container');
  container.innerHTML = '';

  const pageSelectContainer = document.getElementById('blog-page-select-container');
  pageSelectContainer.innerHTML = '';

  const start = (page - 1) * blogItemsPerPage;
  const end = page * blogItemsPerPage;
  const pageItems = blogData.slice(start, end);

  // render =<2 blog frames on page
  pageItems.forEach((blog, index) => {
    const globalIndex = start + index;

    const frame = document.createElement('div');
    frame.className = 'pink-metallic blog-frame';
    frame.innerHTML = `
      <div class="date">${blog.date}</div>
      <div class="inner-text blog-text">
          <h3>${blog.title}</h3>
          <p style="white-space: pre-line;">${blog.text}</p>
      </div>
    `;
    frame.dataset.index = globalIndex;

    container.appendChild(frame);
  });

  // add page select buttons
  pageSelectContainer.innerHTML = `
    <button id="blog-prev-button" class="left toggle-button big-prev-button"></button>
    <button id="blog-next-button" class="right toggle-button big-next-button"></button>
  `;

  // add click listeners for buttons
  const prevButton = document.getElementById('blog-prev-button');
  const nextButton = document.getElementById('blog-next-button');

  prevButton.addEventListener('click', prevBlogPage);
  nextButton.addEventListener('click', nextBlogPage);

  const totalPages = Math.ceil(blogData.length / blogItemsPerPage);

  if (currentBlogPage === 1) { prevButton.disabled = true; }
  if (currentBlogPage === totalPages) { nextButton.disabled = true; }
}

// MUSIC

// Variables
let musicData = [];
let currentMusicPage = 1;
let currentMusicIndex = 1;
let musicItemsPerPage = 10;

// Functions
function nextMusicPage() {
  const musicLength = musicData.length;
  const itemsOnNextPage = musicLength - (currentMusicPage * musicItemsPerPage); 
  if (itemsOnNextPage > 0) {
    currentMusicPage++;
    renderMusicFrames(currentMusicPage); 
  }
}
function prevMusicPage() {
  if (currentMusicPage > 1) {
    currentMusicPage--; 
    renderMusicFrames(currentMusicPage);
  }
}
function playMusicFromFrame(index) {
  // Change to Music Playlist, setting song index to currentMusicIndex
  const selected = "Music";
  playlistSelect.value = selected;
  track_list = playlists[selected];
  track_index = index;
  songTitle.textContent = track_list[index].name;
  loadTrack(track_index);
  currentSong.play();
  playPauseTrackButton.innerHTML = '<img src="/assets/images/pause.png">';
  isPlaying = true;
}
function renderMusicFrames(page) {
    const container = document.getElementById('music-container');
    container.innerHTML = '';

    const pageSelectContainer = document.getElementById('music-page-select-container');
    pageSelectContainer.innerHTML = '';

    const start = (page - 1) * musicItemsPerPage;
    const end = page * musicItemsPerPage;
    const pageItems = musicData.slice(start, end);

    // create the <=10 frames for the current page
    pageItems.forEach((track, index) => {
        const globalIndex = start + index;

        const frame = document.createElement('div');
        frame.className = 'pink-metallic';

        // if track index is even, make left frame
        if (globalIndex % 2 == 0) {
          frame.className += ' music-frame-left';
            frame.innerHTML = `
                <a onClick='playMusicFromFrame(${globalIndex})' target="_blank" rel="noopener noreferrer"><img class='cover-art-left' src="${track.art}" style="cursor: pointer;"></a>
                <div id='inner-right' class="inner-text inner-right">
                    <h3>${track.song}</h3>
                    <p class='date'>${track.date}</p>
                    <p class='description'>${track.description}</p>
                </div>
            `;
        } else {
          frame.className += ' music-frame-right';
            frame.innerHTML = `
                <div id='inner-left' class="inner-text inner-left">
                    <h3>${track.song}</h3>
                    <p class='description'>${track.description}</p>
                    <p class='date'>${track.date}</p>
                </div>
                <a onClick='playMusicFromFrame(${globalIndex})' target="_blank" rel="noopener noreferrer"><img class='cover-art-right' src="${track.art}" style="cursor: pointer;"></a>
            `;
        }

        container.appendChild(frame);
    });

    // add page select buttons
    pageSelectContainer.innerHTML = `
      <button id="music-prev-button" class="left toggle-button grid-prev-button"></button>
      <button id="music-next-button" class="right toggle-button grid-next-button"></button>
    `;

    // add click listeners for buttons
    const prevButton = document.getElementById('music-prev-button');
    const nextButton = document.getElementById('music-next-button');

    prevButton.addEventListener('click', prevMusicPage);
    nextButton.addEventListener('click', nextMusicPage);

    // disable buttons for first and last page
    const totalPages = Math.ceil(musicData.length / musicItemsPerPage);

    if (currentMusicPage === 1) { prevButton.disabled = true; }
    if (currentMusicPage === totalPages) { nextButton.disabled = true; }
}

// OUTFITS

// Variables
let outfitsData = [];
let currentOutfitIndex = 0;
let outfitsPerPage = 1;

// Functions
function nextOutfitPage() {
  if (currentOutfitIndex < outfitsData.length-1) {
    currentOutfitIndex++;
    renderOutfitFrames(currentOutfitIndex);
  }
}
function prevOutfitPage() {
  if (currentOutfitIndex > 0) {
    currentOutfitIndex--;
    renderOutfitFrames(currentOutfitIndex);
  }
}
function renderOutfitFrames(index) {
  console.log(index);
  const container = document.getElementById('outfits-container');
  container.innerHTML =  `
    <div id="outfits-platform" class="pink-metallic circle-container"></div>
    <img src="${outfitsData[index].tayla}" class="character tayla" loading='lazy'>
    <img src="${outfitsData[index].harsh}" class="character harsh" loading='lazy'>
    <div id="outfits-description-frame" class="pink-metallic outfits-frame">
        <div id="outfits-description-inner-text" class="inner-text outfits-text">
          <h3>${outfitsData[index].title}</h3>
          <p>${outfitsData[index].description}</p>
          <p class='date'>${outfitsData[index].date}</p>
        </div>
    </div>
  `;

  const pageSelectContainer = document.getElementById('outfits-page-select-container');
  pageSelectContainer.innerHTML = `
    <button id="outfits-prev-button" class="left toggle-button big-prev-button"></button>
    <button id="outfits-next-button" class="right toggle-button big-next-button"></button>
  `;

  // add click listeners for buttons
  const prevButton = document.getElementById('outfits-prev-button');
  const nextButton = document.getElementById('outfits-next-button');

  prevButton.addEventListener('click', prevOutfitPage);
  nextButton.addEventListener('click', nextOutfitPage);

  // disable buttons for first and last page
  const totalPages = outfitsData.length;

  if (currentOutfitIndex === 0) { prevButton.disabled = true; }
  if (currentOutfitIndex === totalPages-1) { nextButton.disabled = true; }  

  // cache next outfits
  const nextIndex = index + 1;
  if (nextIndex < outfitsData.length) {
    const preloadTayla = new Image();
    preloadTayla.src = outfitsData[nextIndex].tayla;

    const preloadHarsh = new Image();
    preloadHarsh.src = outfitsData[nextIndex].harsh;
  }

  // cache previous outfits
  const prevIndex = index - 1;
  if (prevIndex >= 0) {
    const preloadPrevTayla = new Image();
    preloadPrevTayla.src = outfitsData[prevIndex].tayla;

    const preloadPrevHarsh = new Image();
    preloadPrevHarsh.src = outfitsData[prevIndex].harsh;
  }
  
}

// SCRAPBOOK

// Variables
let scrapbookData = [];
let scrapbookViewGrid = true;
let currentScrapbookIndex = 0;
let currentScrapbookPage = 1;
let scrapbookItemsPerPage = 15;

// Functions
function nextScrapbookGridPage() {
  scrapbookLength = scrapbookData.length;
  itemsOnNextPage = scrapbookLength - (currentScrapbookPage * scrapbookItemsPerPage);
  if (itemsOnNextPage > 0) {
    currentScrapbookPage++;
    currentScrapbookIndex += scrapbookItemsPerPage;
    renderScrapbookFrames(currentScrapbookPage, 'grid');
  }
}
function prevScrapbookGridPage() {
  if (currentScrapbookPage > 1) {
    currentScrapbookPage--;
    currentScrapbookIndex -= scrapbookItemsPerPage;
    renderScrapbookFrames(currentScrapbookPage, 'grid');
  }
}
function nextScrapbookBigPage() {
  if (currentScrapbookIndex < scrapbookData.length - 1) {
    currentScrapbookIndex++;
    currentScrapbookPage = Math.floor(currentScrapbookIndex / scrapbookItemsPerPage) + 1;
    renderScrapbookFrames(currentScrapbookIndex, 'big');
  }
}
function prevScrapbookBigPage() {
  if (currentScrapbookIndex > 0) {
    currentScrapbookIndex--;
    currentScrapbookPage = Math.floor(currentScrapbookIndex / scrapbookItemsPerPage) + 1;
    renderScrapbookFrames(currentScrapbookIndex, 'big');
  }
}
function setupScrapbookButtons() {
  const gridScrapbookButton = document.getElementById('grid-scrapbook-button');
  const bigScrapbookButton = document.getElementById('big-scrapbook-button');
  if (gridScrapbookButton && bigScrapbookButton) {
    gridScrapbookButton.removeEventListener('click', scrapbookGridViewToggle);
    bigScrapbookButton.removeEventListener('click', scrapbookBigViewToggle);

    gridScrapbookButton.addEventListener('click', scrapbookGridViewToggle);
    bigScrapbookButton.addEventListener('click', scrapbookBigViewToggle);
  }
}
function scrapbookGridViewToggle() {
  if (!scrapbookViewGrid) {
    scrapbookViewGrid = true;
    renderScrapbookFrames(currentScrapbookPage, 'grid');
    
  }
}
function scrapbookBigViewToggle() {
  if (scrapbookViewGrid) {
    scrapbookViewGrid = false;
    renderScrapbookFrames(currentScrapbookIndex, 'big');
  }
}
function renderScrapbookFrames(content, view) {
  const container = document.getElementById('scrapbook-container');
  container.innerHTML = '';

  const pageSelectContainer = document.getElementById('scrapbook-page-select-container');
  pageSelectContainer.innerHTML = '';

  // if grid view, the current page, which has <= 15 images, is passed as content
  if (view === 'grid') {
    document.getElementById('grid-scrapbook-button').disabled = true;
    document.getElementById('big-scrapbook-button').disabled = false;

    container.className = 'scrapbook-container-grid';

    const start = (content - 1) * scrapbookItemsPerPage;
    const end = content * scrapbookItemsPerPage;
    const pageItems = scrapbookData.slice(start, end);
    currentScrapbookIndex = start;

    pageItems.forEach((image, index) => {
      const globalIndex = start + index;

      const frame = document.createElement('div');
      frame.className = 'pink-metallic scrapbook-frame-small';
      frame.innerHTML = `
        <img class="scrapbook-image" src="${image.path}">
      `;
      frame.dataset.index = globalIndex;

      // Add click listener to switch to big view
      frame.addEventListener('click', () => {
        currentScrapbookIndex = globalIndex;
        scrapbookBigViewToggle();
      });

      container.appendChild(frame);
    });

    // add page select buttons
    pageSelectContainer.innerHTML = `
      <button id="scrapbook-grid-prev-button" class="left toggle-button grid-prev-button"></button>
      <button id="scrapbook-grid-next-button" class="right toggle-button grid-next-button"></button>
    `;

    // add click listeners for buttons
    const prevButton = document.getElementById('scrapbook-grid-prev-button');
    const nextButton = document.getElementById('scrapbook-grid-next-button');

    prevButton.addEventListener('click', prevScrapbookGridPage);
    nextButton.addEventListener('click', nextScrapbookGridPage);

    const totalPages = Math.ceil(scrapbookData.length / scrapbookItemsPerPage);

    if (currentScrapbookPage === 1) { prevButton.disabled = true; }
    if (currentScrapbookPage === totalPages) { nextButton.disabled = true; }

  // if big view, the current index is passed as content
  } else {
    document.getElementById('grid-scrapbook-button').disabled = false;
    document.getElementById('big-scrapbook-button').disabled = true;

    container.className = 'scrapbook-container-big';
    
    const image = scrapbookData[content];

    const frame = document.createElement('div');
    frame.className = 'pink-metallic scrapbook-frame-big';
    frame.innerHTML = `
      <img class="scrapbook-image" src="${image.path}">
      <div class='inner-text scrapbook-description'>
        ${image.description}
        <div class='date'>${image.date}</div>
      </div>
    `;

    container.appendChild(frame);

    // add page select buttons
    pageSelectContainer.innerHTML = `
      <button id="scrapbook-big-prev-button" class="left toggle-button big-prev-button"></button>
      <button id="scrapbook-big-next-button" class="right toggle-button big-next-button"></button>
    `;

    // add click listeners for buttons
    const prevButton = document.getElementById('scrapbook-big-prev-button');
    const nextButton = document.getElementById('scrapbook-big-next-button');

    prevButton.addEventListener('click', prevScrapbookBigPage);
    nextButton.addEventListener('click', nextScrapbookBigPage);

    if (currentScrapbookIndex === 0) { prevButton.disabled = true; }
    if (currentScrapbookIndex === scrapbookData.length - 1) { nextButton.disabled = true; }
  }
}

</script>
